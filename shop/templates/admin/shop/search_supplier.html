{% load i18n %}

<form method="get" action="{% url 'shop:admin_products_explorer' %}" id="supplier-quick-search">
  <div style="display: flex; align-items: center; gap: 10px; margin: 15px 0;">
    <label for="supplier-search" style="font-weight: bold;">{% trans "Search by Supplier:" %}</label>
    <select name="supplier" id="supplier-search" style="padding: 5px; min-width: 200px;">
      <option value="">-- {% trans "All Suppliers" %} --</option>
      {% for supplier in suppliers %}
        <option value="{{ supplier.id }}" {% if selected_supplier == supplier.id|stringformat:"i" %}selected{% endif %}>
          {{ supplier.name }}
        </option>
      {% endfor %}
    </select>
    <button type="submit" style="padding: 5px 10px; background-color: #417690; color: white; border: none; cursor: pointer;">
      {% trans "Filter" %}
    </button>
    
    {% if selected_supplier %}
    <a href="{% url 'shop:admin_products_explorer' %}" style="margin-left: 10px; text-decoration: underline;">
      {% trans "Clear Filter" %}
    </a>
    {% endif %}
  </div>
</form>

<script>
document.getElementById('supplier-search').addEventListener('change', function() {
  document.getElementById('supplier-quick-search').submit();
});
</script> 